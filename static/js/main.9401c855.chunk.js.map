{"version":3,"sources":["env.js","functions.js","ethereum.js","containers/MetamaskNetworkError/MetamaskNetworkError.js","containers/Home/Home.js","containers/Navigation/NavigationElement.js","containers/Navigation/Navigation.js","containers/CertificateBox/SignerBox.js","containers/CertificateBox/CertificateBox.js","containers/RegisterCertificate/RegisterCertificate.js","containers/ViewCertificate/ViewCertificate.js","containers/ViewCertificate/Hash/Hash.js","containers/AddCertifier/AddCertifier.js","containers/ListAuthorities/CertifierBox.js","containers/ListAuthorities/ListAuthorities.js","containers/SignCertificate/CSVReader.js","containers/DatePicker/DatePicker.js","containers/SignCertificate/SignCertificate.js","App.js","serviceWorker.js","index.js"],"names":["env","network","certificateContract","address","abi","require","dataTypes","certOrder","authOrder","extraDataTypes","image","file","url","date1","date2","location","datetime1","datetime2","comments","extraDataKeysExample","dataTypesExample","base58","date","datetime","managerAddress","TX_STATUS_ENUM","NOT_INITIATED","SIGNING","WAITING_FOR_CONFIRMATION","CONFIRMED","AUTHORITY_STATUS_ENUM","NOT_AUTHORISED","AUTHORISED","MIGRATED","SUSPENDED","METAMASK_ENUM","NOT_INSTALLED","INSTALLED_BUT_NOT_CONNECTED","CONNECTED","OTHER_NETWORK","networkId","module","exports","ethers","bs58","bytesToString","bytes","utils","toUtf8String","split","join","parsePackedAddress","packedAddresses","slice","toLowerCase","length","Error","addressArray","i","push","getDataTypeHexByte","type","index","indexOf","toString","guessDataTypeFromInput","input","String","bytify","hex","Number","numberOfDecimals","decimalByte","Math","round","hexlify","toUtf8Bytes","decode","isNaN","Date","dateStr","getDate","monthStr","getMonth","yearStr","getFullYear","getTime","renderBytes","decimals","encode","Buffer","from","toLocaleString","isProperValue","undefined","NaN","includes","isFullRLP","certificateHex","RLP","getCertificateHashFromDataRLP","certificateDataRLP","digest","concat","keccak256","encodeCertificateObject","obj","signature","signatureArray","entries","Object","certRLPArray","forEach","property","extraData","filter","datatypeIndex","dataType","dataRLP","fullRLP","certificateHash","addSignaturesToCertificateRLP","encodedFullCertificate","certificateData","decoded","decodeCertificateData","encodedCertificate","decodedCertificatePart","parsedCertificate","entry","returnObj","signatures","encodeCertifyingAuthority","rlpArray","decodeCertifyingAuthority","encodedAuthorityData","getCertificateObjFromCertificateHash","a","window","provider","getDefaultProvider","getLogs","fromBlock","toBlock","topics","id","logs","this","setState","displayText","txHashArray","log","txHash","transactionHash","getTransaction","transaction","arg","certificateContractInstance","interface","decodeFunctionData","data","certificateObj","toTitleCase","str","map","str1","toUpperCase","toWebsiteURL","website","setGlobalVariables","signer","providers","Web3Provider","ethereum","getSigner","web3","currentProvider","networkVersion","Contract","onCorrectNetwork","getAddress","then","userAddress","intervalId","setInterval","enable","on","accounts","autoRefreshOnNetworkChange","selectedAddress","error","setUpMetamask","console","clearInterval","state","allowed","metamaskStatus","componentDidMount","props","updateAllowed","componentWillUnmount","render","className","href","rel","target","showSuccess","Component","style","padding","boolean","registrationAllowed","withRouter","urlFormat","path","heading","pathname","cursor","onClick","history","isManager","showAllItems","displayHideButton","invalidNetwork","setManager","functions","manager","navigationGroup","document","querySelector","offsetHeight","loading","signerAddress","name","status","recoverAddress","certifyingAuthorities","certifyingAuthority","caObj","_z","isAuthorised","validCertificate","signerAuthorisedClass","signerElement","serial","textDecoration","display","height","src","width","textAlign","marginLeft","QRCode","isAlreadyRegistered","qrDisplay","toCanvas","getElementById","certificates","certificate","signers","pc","Helmet","content","preview","category","score","subject","DateEl","children","keys","key","newStatus","certificateString","textAreaClass","parsingWait","txStatus","errorMessage","timeoutId","onTextAreaChange","event","spacesRemoved","value","setTimeout","clearTimeout","onRegister","registerCertificate","tx","wait","message","onChange","disabled","HASH_CHECKING_ENUM","NOT_CHECKING","CHECKING","FOUND_VALID","FOUND_INVALID","userEnteredHash","inputError","recentCertificateHashes","hashCheckStatus","item","reverse","onVerifyCertificate","hash","certificateStruct","margin","placeholder","match","params","statusMessage","onConfirmClick","encoded","updateCertifyingAuthority","maxHeight","maxWidth","certifierElement","certifiers","hexZeroPad","hexStripZeros","self","CSVReader","inputId","onFileLoaded","onError","accept","e","reader","FileReader","filename","files","onload","result","readAsText","handleChangeFile","MONTH","1","days","2","3","4","5","6","7","8","9","10","11","12","month","year","updateState","d","selected","Array","CURRENT_PAGE_ENUM","SELECT_MODE","SIGN_FRESH_CERTIFICATE","SIGN_ENCODED_CERTIFICATE","SIGN_CSV","currentScreen","copied","authorityName","csvKeys","certificatesToSign","errorsInCSV","csvSigning","certificatesSigned","currentAddress","onNewFieldUpdate","fromEntries","signNewCertificate","signMessage","arrayify","signEncodedCertificate","output","row","columns","certObj","signCSV","alert","arrayOfCertificatesSignedPromises","Promise","all","promise","downloadCSV","text","c","element","createElement","Blob","URL","createObjectURL","download","body","appendChild","click","screen","header","wordBreak","copy","j","showTimeSelect","floor","handleDarkSideForce","field","createBrowserHistory","basename","process","App","exact","component","Home","RegisterCertificate","ViewCertificate","Hash","AddCertifier","ListAuthorities","SignCertificate","Boolean","hostname","ReactDOM","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.9401c855.chunk.js","sourcesContent":["const certificateStorageJSON = require('./compiledContracts/CertiDApp_CertiDApp.json');\n\nconst env = {\n  network: 'kovan',\n  certificateContract: {\n    address: '0x3ea996e3A2f2A8b235065a7Fa5d55e5f626f0003',\n    abi: certificateStorageJSON.abi\n  },\n  dataTypes: [null, 'bytes', 'number', 'float', 'string', 'boolean', 'base58', 'date', 'datetime'],\n  certOrder: ['name', 'subject', 'score', 'category'],\n  authOrder: ['name', 'website'],\n  extraDataTypes: { ///comments // recommendations //file //expires\n    image: 'base58',\n    file: 'base58',\n    url: 'string',\n    date1: 'date',\n    date2: 'date',\n    location: 'string',\n    datetime1: 'datetime',\n    datetime2: 'datetime',\n    comments: 'string'\n  },\n  extraDataKeysExample: {\n    url: 'google.com',\n    comments: 'Student was very hardworking.',\n    location: 'Institute Hall, IIEST Shibpur, Howrah'\n  },\n  dataTypesExample: {\n    base58: 'IPFS Hash like QmQ9kasfzNTwbxGXSRyCp1WFdBXScpHNKDjrUPSWw3VR4z',\n    date: 'DD/MM/YYYY like 23/01/2020',\n    datetime: 'Unix timestamp like 1580476565'\n  },\n  managerAddress: '0xc8e1f3b9a0cdfcef9ffd2343b943989a22517b26',\n  TX_STATUS_ENUM: {\n    NOT_INITIATED: 0,\n    SIGNING: 1,\n    WAITING_FOR_CONFIRMATION: 2,\n    CONFIRMED: 3\n  },\n  AUTHORITY_STATUS_ENUM: {\n    NOT_AUTHORISED: 0,\n    AUTHORISED: 1,\n    MIGRATED: 2,\n    SUSPENDED: 3\n  },\n  METAMASK_ENUM: {\n    NOT_INSTALLED: 0,\n    INSTALLED_BUT_NOT_CONNECTED: 1,\n    CONNECTED: 2,\n    OTHER_NETWORK: 3\n  }\n};\n\nswitch (env.network) {\n  case 'homestead':\n    env.networkId = 1;\n    break;\n  case 'kovan':\n    env.networkId = 42;\n    break;\n}\n\nmodule.exports = env;\n","import { dataTypes, certOrder, authOrder, extraDataTypes, certificateContract, network } from './env';\n\nconst ethers = require('ethers');\nconst bs58 = require('bs58');\n\nexport function bytesToString(bytes) {\n  return ethers.utils.toUtf8String(bytes).split('\\u0000').join('');\n}\n\nexport function parsePackedAddress(packedAddresses) {\n  if(packedAddresses.slice(0,2).toLowerCase() === '0x') packedAddresses = packedAddresses.slice(2);\n  if(packedAddresses.length%40 !== 0) throw new Error('Invalid packed addresses');\n  const addressArray = [];\n  for(let i = 0; i < packedAddresses.length/40; i++) {\n    addressArray.push('0x'+packedAddresses.slice(0+40*i,40+40*i));\n  }\n  return addressArray;\n}\n\nexport function getDataTypeHexByte(type) {\n  const index = dataTypes.indexOf(type);\n  if(index === -1) throw new Error('Invalid certificate data type: ' + type);\n  return index.toString(16);\n}\n\nexport function guessDataTypeFromInput(input) {\n  switch(typeof input) {\n    case 'string':\n      if(input.slice(0,2) === '0x') {\n        return 'bytes';\n      }\n      return 'string';\n    case 'number':\n      if(String(input).split('.')[1]) {\n        return 'float';\n      }\n      return 'number';\n    default:\n      return typeof input;\n  }\n}\n\n// remaining for image and data\n// take number or string and convert it into bytes\nexport function bytify(input, type) {\n  switch(type || guessDataTypeFromInput(input)) {\n    case 'bytes':\n      return input;\n    case 'number':\n      let hex = Number(input).toString(16);\n      if(hex.length % 2 !== 0) {\n          hex = '0'+hex;\n      }\n      return '0x' + hex;\n    case 'float':\n      const numberOfDecimals = (String(input).split('.')[1] || '').length;\n      const decimalByte = bytify(numberOfDecimals, 'number').slice(2);\n      if(decimalByte.length !== 2) throw new Error(`Invalid decimal byte: (${decimalByte})`);\n      const numberWithoutDecimals = Math.round(input * 10**numberOfDecimals);\n      const numberBytes = bytify(numberWithoutDecimals, 'number').slice(2);\n      return '0x' + decimalByte + numberBytes;\n    case 'string':\n      return ethers.utils.hexlify(ethers.utils.toUtf8Bytes(input));\n    case 'boolean':\n      return input ? '0x01' : '0x00';\n    case 'base58':\n      return '0x'+bs58.decode(input).toString('hex');\n    case 'date':\n      if(typeof input === 'string') {\n        input = input.split('/').join('');\n        if(isNaN(Number(input))) throw new Error(`Invalid Date Content (${input})`);\n        if(String(input).length !== 8) throw new Error(`Date should have 8 digits (${input}) (length: ${String(input).length})`);\n        if(String(input).split('.').length > 1) throw new Error(`Date should have no decimal point (${input})`);\n        return bytify(input, 'number');\n      } else if(typeof input === 'object' && input instanceof Date && !isNaN(input)) {\n        let dateStr = String(input.getDate());\n        if(dateStr.length < 2) dateStr = '0'+dateStr;\n        let monthStr = String(input.getMonth()+1);\n        if(monthStr.length < 2) monthStr = '0'+monthStr;\n        let yearStr = String(input.getFullYear());\n        return bytify(`${dateStr}/${monthStr}/${yearStr}`, 'date');\n      } else {\n        throw new Error('Invalid Date Type ' + typeof input);\n      }\n    case 'datetime':\n      if(typeof input === 'string') {\n        input = (new Date(input)).getTime();\n      }\n      return bytify(input, 'number');\n    default:\n      return null;\n  }\n}\n\nexport function renderBytes(hex, type) {\n  switch(type) {\n    case 'bytes':\n      return hex;\n    case 'number':\n      if(hex === '0x') return null;\n      return +hex;\n    case 'float':\n      if(hex === '0x') return null;\n      const decimals = +('0x'+hex.slice(2,4));\n      const number = +('0x'+hex.slice(4));\n      return number / 10**decimals;\n    case 'string':\n      return bytesToString(hex);\n    case 'boolean':\n      return !!(+hex);\n    case 'base58':\n      if(hex.slice(0,2) === '0x') hex = hex.slice(2);\n      return bs58.encode(Buffer.from(hex, 'hex'));\n    case 'date':\n      let date = String(renderBytes(hex, 'number'));\n      if(date.length < 8) date = '0' + date;\n      return date.slice(0,2)+'/'+date.slice(2,4)+'/'+date.slice(4,8);\n    case 'datetime':\n      return (new Date(renderBytes(hex, 'number'))).toLocaleString();\n    default:\n      return hex;\n  }\n}\n\nexport function isProperValue(input) {\n  return ![undefined, null, NaN].includes(input);\n}\n\nexport function isFullRLP(certificateHex) {\n  const decoded = ethers.utils.RLP.decode(certificateHex);\n  return typeof decoded[0] !== 'string';\n}\n\nexport function getCertificateHashFromDataRLP(certificateDataRLP) {\n  const digest = ethers.utils.hexlify(ethers.utils.concat([ethers.utils.toUtf8Bytes('\\x19Ethereum Signed Message:\\n'+(certificateDataRLP.length/2 - 1)),certificateDataRLP]));\n  return ethers.utils.keccak256(digest);\n}\n\nexport function encodeCertificateObject(obj, signature = []) {\n  let signatureArray = typeof signature === 'object' ? signature : [signature];\n  const entries = Object.entries(obj);\n  const certRLPArray = [];\n\n  // adding name and subject into rlpArray\n  certOrder.forEach(property => {\n    if(property === 'score') {\n      // adding score into rlpArray\n      if(isProperValue(obj['score'])) {\n        certRLPArray.push(bytify(+obj['score'], 'float'));\n      } else {\n        certRLPArray.push('0x');\n      }\n    } else {\n      const hex = isProperValue(obj[property]) ? bytify(obj[property]) : '0x';\n      certRLPArray.push(hex);\n    }\n  });\n\n  const extraData = entries.filter(property => !certOrder.includes(property[0]) && isProperValue(property[1]));\n\n  if(extraData.length) {\n    // pushing datatype storage of the extra datas\n    certRLPArray.push('');\n    const datatypeIndex = certRLPArray.length - 1;\n    extraData.forEach(property => {\n      const dataType = extraDataTypes[property[0]] || guessDataTypeFromInput(property[1]);\n      certRLPArray[datatypeIndex] = certRLPArray[datatypeIndex]\n        + getDataTypeHexByte(dataType);\n      certRLPArray.push([bytify(property[0]), bytify(property[1], dataType)]);\n    });\n\n    if(certRLPArray[datatypeIndex].length % 2) {\n      certRLPArray[datatypeIndex] = certRLPArray[datatypeIndex] + '0';\n    }\n\n    certRLPArray[datatypeIndex] = '0x' + certRLPArray[datatypeIndex];\n  }\n\n  // console.log(certRLPArray);\n  const dataRLP = ethers.utils.RLP.encode(certRLPArray);\n  return {\n    fullRLP: ethers.utils.RLP.encode([certRLPArray, ...signatureArray]),\n    dataRLP,\n    certificateHash: getCertificateHashFromDataRLP(dataRLP)\n  };\n}\n\nexport function addSignaturesToCertificateRLP(encodedFullCertificate, signature = []) {\n  let signatureArray = typeof signature === 'object' ? signature : [signature];\n  let certificateData;\n  // console.log('in addsig',{encodedFullCertificate, signature});\n  if(typeof encodedFullCertificate === 'object') {\n    if(encodedFullCertificate.dataRLP) {\n      certificateData = ethers.utils.RLP.decode(encodedFullCertificate.dataRLP);\n    } else {\n      certificateData = ethers.utils.RLP.decode(encodedFullCertificate.fullRLP)[0];\n    }\n  } else {\n    const decoded = ethers.utils.RLP.decode(encodedFullCertificate);\n    certificateData = isFullRLP(encodedFullCertificate) ? decoded[0] : decoded;\n    if(decoded.length > 1) {\n      signatureArray = [...decoded.slice(1), ...signatureArray];\n    }\n  }\n  // console.log({signatureArray});\n  const dataRLP = ethers.utils.RLP.encode(certificateData);\n\n  return {\n    fullRLP: ethers.utils.RLP.encode([certificateData, ...signatureArray]),\n    dataRLP,\n    certificateHash: getCertificateHashFromDataRLP(dataRLP)\n  };\n}\n\nexport function decodeCertificateData(encodedCertificate) {\n  let fullRLP = typeof encodedCertificate === 'object' ? encodedCertificate.fullRLP : encodedCertificate;\n  const decoded = ethers.utils.RLP.decode(fullRLP);\n  const parsedCertificate = {};\n\n  let decodedCertificatePart, signatureArray;\n  //checking if decoded is of fullRLP or certificate data part\n  if(typeof decoded[0] === 'string') {\n    decodedCertificatePart = decoded;\n  } else {\n    decodedCertificatePart = decoded[0];\n    signatureArray = decoded.slice(1);\n  }\n\n  decodedCertificatePart.forEach((entry, i) => {\n    if(i < certOrder.length) {\n      if(certOrder[i] !== 'score') {\n        parsedCertificate[certOrder[i]] = ethers.utils.toUtf8String(entry);\n      } else {\n        parsedCertificate[certOrder[i]] = renderBytes(entry, 'float');\n      }\n    } else if(i > certOrder.length){\n      const type = dataTypes[+('0x'+decodedCertificatePart[certOrder.length].slice(1+i-certOrder.length, 2+i-certOrder.length))];\n      // console.log({value: entry[1], type});\n      parsedCertificate[bytesToString(entry[0])] = renderBytes(entry[1], type);\n    }\n  });\n\n  const returnObj = { parsedCertificate };\n\n  returnObj.certificateHash = getCertificateHashFromDataRLP(ethers.utils.RLP.encode(decodedCertificatePart));\n\n  if(signatureArray) {\n    returnObj.signatures = signatureArray;\n  }\n\n  return returnObj;\n}\n\nexport function encodeCertifyingAuthority(obj) {\n  const entries = Object.entries(obj);\n  const rlpArray = [];\n\n  authOrder.forEach(property => {\n    const hex = isProperValue(obj[property]) ? bytify(obj[property]) : '0x';\n    rlpArray.push(hex);\n  });\n\n  const extraData = entries.filter(property => !authOrder.includes(property[0]) && isProperValue(property[1]));\n\n  if(extraData.length) {\n    // pushing datatype storage of the extra datas\n    rlpArray.push('');\n    const datatypeIndex = rlpArray.length - 1;\n    extraData.forEach(property => {\n      const dataType = extraDataTypes[property[0]] || guessDataTypeFromInput(property[1]);\n      rlpArray[datatypeIndex] = rlpArray[datatypeIndex]\n        + getDataTypeHexByte(dataType);\n      rlpArray.push([bytify(property[0]), bytify(property[1], dataType)]);\n    });\n\n    if(rlpArray[datatypeIndex].length % 2) {\n      rlpArray[datatypeIndex] = rlpArray[datatypeIndex] + '0';\n    }\n\n    rlpArray[datatypeIndex] = '0x' + rlpArray[datatypeIndex];\n  }\n\n  // console.log(rlpArray);\n  return ethers.utils.RLP.encode(rlpArray);\n}\n\nexport function decodeCertifyingAuthority(encodedAuthorityData) {\n  const obj = {};\n  const decoded = ethers.utils.RLP.decode(encodedAuthorityData);\n  decoded.forEach((entry, i) => {\n    if(i < authOrder.length) {\n      obj[authOrder[i]] = ethers.utils.toUtf8String(entry);\n    } else if(i > authOrder.length){\n      const type = dataTypes[+('0x'+decoded[authOrder.length].slice(1+i-authOrder.length, 2+i-authOrder.length))];\n      // console.log({value: entry[1], type});\n      obj[bytesToString(entry[0])] = renderBytes(entry[1], type);\n    }\n  });\n  return obj;\n}\n\nexport async function getCertificateObjFromCertificateHash(certificateHash) {\n  if(!window.provider) window.provider = ethers.getDefaultProvider(network);\n  const logs = await window.provider.getLogs({\n    address: certificateContract.address,\n    fromBlock: 0,\n    toBlock: 'latest',\n    topics: [ethers.utils.id('Certified(bytes32,address)'), certificateHash]\n  });\n\n  if(!logs.length) this.setState({ displayText: 'Certificate not yet registered or it does not exist' });\n\n  let certificateObj, txHashArray = [];\n\n  for(const log of logs) {\n    const txHash = log.transactionHash;\n    const transaction = await window.provider.getTransaction(txHash);\n    const arg = window.certificateContractInstance.interface.decodeFunctionData('registerCertificate(bytes)',transaction.data)[0];\n\n    const decoded = decodeCertificateData(arg);\n    // console.log({decoded, arg})\n\n    if(!certificateObj) {\n      certificateObj = {\n        fullRLP: arg,\n        ...decoded\n      };\n    } else {\n      // console.log('in else', {certificateObj, certObjExpand: addSignaturesToCertificateRLP(\n      //   certificateObj,\n      //   decoded.signatures\n      // )});\n      certificateObj = {\n        ...certificateObj,\n        ...addSignaturesToCertificateRLP(\n          certificateObj,\n          decoded.signatures\n        ),\n        signatures: decoded.signatures\n      };\n    }\n\n    // console.log({certificateObj});\n    if(!txHashArray.includes(txHash)) {\n      txHashArray.push(txHash);\n    }\n  }\n\n  certificateObj.txHashArray = txHashArray;\n\n  return certificateObj;\n}\n\nexport function toTitleCase(str) {\n  return str.split(' ').map(str1 => str1.slice(0,1).toUpperCase()+str1.slice(1)).join(' ');\n}\n\nexport function toWebsiteURL(website) {\n  if(website.slice(0,4) !== 'http') {\n    website = 'http://' + website;\n  }\n  return website;\n}\n","const ethers = require('ethers');\nconst { certificateContract, network, networkId } = require('./env');\n\nconst setGlobalVariables = () => {\n  // console.log(window.web3.currentProvider);\n\n  // window.web3.currentProvider.networkVersion;\n  // === (network === 'homestead' ? '1' : '42');\n\n  /// set this\n\n  window.signer = (new ethers.providers.Web3Provider(window.ethereum)).getSigner();\n\n  if(window.web3.currentProvider.networkVersion == networkId) {\n    window.certificateContractInstance = new ethers.Contract(\n      certificateContract.address,\n      certificateContract.abi,\n      window.signer\n    );\n    window.onCorrectNetwork = true;\n  } else {\n    window.certificateContractInstance = new ethers.Contract(\n      certificateContract.address,\n      certificateContract.abi,\n      ethers.getDefaultProvider(network)\n    );;\n    window.onCorrectNetwork = false;\n  }\n\n  window.signer.getAddress().then(address => window.userAddress = address);\n\n  // window.userAddress = signer;//.then(address => window.userAddress = address);\n}\n\nconst setUpMetamask = () => {\n  try {\n    window.ethereum.enable().then(() => {\n      setGlobalVariables();\n      window.ethereum.on('networkChanged', function (accounts) {\n        // window.location.reload();\n        setGlobalVariables();\n      });\n\n      window.ethereum.autoRefreshOnNetworkChange = false;\n    });\n\n\n\n    setInterval(() => {\n      if(window.web3 && window.web3.currentProvider && window.web3.currentProvider.selectedAddress && window.userAddress && window.web3.currentProvider.selectedAddress.toLowerCase() !== window.userAddress.toLowerCase()) {\n        setGlobalVariables();\n      }\n    },100);\n\n    return true;\n  } catch (error) {\n    return false;\n  }\n};\n\nwindow.certificateContractInstance = new ethers.Contract(\n  certificateContract.address,\n  certificateContract.abi,\n  ethers.getDefaultProvider(network)\n);\n\nif(window.ethereum) {\n  const intervalId = setInterval(() => {\n    if(setUpMetamask()) {\n      console.log('Metamask setup done!');\n      clearInterval(intervalId);\n    }\n  }, 100);\n}\n\n\n\n\n// export { networkId, certificateContractInstance };\n","import React, { Component } from 'react';\nimport { METAMASK_ENUM, network } from '../../env';\n\nexport default class extends Component {\n  state = {\n    allowed: null,\n    metamaskStatus: null\n  }\n\n  componentDidMount = () => {\n    this.intervalId = setInterval(() => {\n      let allowed = false;\n      let metamaskStatus = METAMASK_ENUM.NOT_INSTALLED;\n      if(window.ethereum) {\n        metamaskStatus = METAMASK_ENUM.INSTALLED_BUT_NOT_CONNECTED\n      }\n      if(window.signer) {\n        allowed = true;\n        metamaskStatus = METAMASK_ENUM.CONNECTED;\n        if(!window.onCorrectNetwork) {\n          allowed= false;\n          metamaskStatus = METAMASK_ENUM.OTHER_NETWORK;\n        }\n      }\n\n      if(allowed !== this.state.allowed || metamaskStatus !== this.state.metamaskStatus) {\n        this.setState({ metamaskStatus });\n        if(this.props.updateAllowed) this.props.updateAllowed(allowed);\n      }\n    }, 300);\n  }\n\n  componentWillUnmount = () => {\n    clearInterval(this.intervalId);\n  }\n\n  render = () => {\n    switch(this.state.metamaskStatus) {\n      case METAMASK_ENUM.NOT_INSTALLED:\n        return (\n          <p className=\"error-message\">If you want to register your certificate, you will need <a className=\"link\" href=\"https://metamask.io/\" rel=\"noopenner noreferrer\" target=\"_blank\">Metamask</a> installed. If you are here only to view certificates, installing Metamask is not necessary.</p>\n        );\n      case METAMASK_ENUM.INSTALLED_BUT_NOT_CONNECTED:\n        return (\n          <p className=\"error-message\">Seems you have Metamask installed, please select Connect in Metamask. If it was previously cancelled, then please refresh the page.</p>\n        );\n      case METAMASK_ENUM.CONNECTED:\n        if(this.props.showSuccess) {\n          return (\n            <p className=\"success-message\">Metamask is connected! Please select a tab from above.</p>\n          );\n        } else {\n          return null\n        }\n      case METAMASK_ENUM.OTHER_NETWORK:\n        return (\n          <p className=\"error-message\">Metamask is connected but the network is different. Please switch to <u>{network}</u> network</p>\n        );\n      default:\n        return null;\n    }\n  };\n}\n","import React, { Component } from 'react';\nimport MetamaskNetworkError from '../MetamaskNetworkError/MetamaskNetworkError';\nimport { network, certificateContract, networkId, METAMASK_ENUM } from '../../env';\n\nexport default class extends Component {\n  // state = {\n  //   metamaskStatus: METAMASK_ENUM.NOT_INSTALLED\n  // };\n\n  componentDidMount = () => {\n    // this.intervalId = setInterval(() => {\n    //   let latestStatus = METAMASK_ENUM.NOT_INSTALLED;\n    //   if(window.ethereum) {\n    //     latestStatus = METAMASK_ENUM.INSTALLED_BUT_NOT_CONNECTED;\n    //   }\n    //   if(window.signer) {\n    //     latestStatus = METAMASK_ENUM.CONNECTED;\n    //   }\n    //   if(window.signer && window.web3.currentProvider.networkVersion != networkId) {\n    //     latestStatus = METAMASK_ENUM.OTHER_NETWORK;\n    //   }\n    //   if(this.state.metamaskStatus !== latestStatus) {\n    //     this.setState({ metamaskStatus: latestStatus });\n    //   }\n    // }, 300);\n  };\n\n  // componentWillUnmount = () => {\n  //   clearInterval(this.intervalId);\n  // }\n\n  render = () => (\n    <>\n      <div className=\"status-message\">\n        <h1>Welcome to CertiApp</h1>\n        <p>CertiApp is an Ethereum Blockchain powered Certificate Issuance and Verification Smart Contract.</p>\n        <div style={{padding:'0 10%'}}>\n          <MetamaskNetworkError\n            updateAllowed={boolean => this.setState({ registrationAllowed: boolean })}\n            showSuccess={true}\n          />\n        </div>\n      </div>\n\n      <p>Smart Contract Link: <a className=\"link\" href={`https://${network === 'homestead' ? '' : network+'.'}etherscan.io/address/${certificateContract.address}#code`} target=\"_blank\">GitHub Repository</a></p>\n\n      <div className=\"home-details\">\n      <h3>Why CertiApp</h3>\nCertiApp is aims to solve below identified challenges faced by other modes.\n\n<h4>Challenges in traditional certificates</h4>\n<p>Though we are used to our traditional way of having certificates printed on a hard copy, it has some unminded challenges.</p>\n\n<p>As a winner or performer or attender, we receive certificates from the organizers stating with various logos on it (for e.g. Microsoft) whose authority probably doesn't even know about that and wouldn't want unauthorized printing of certificates with use of their logo. How easy is it to download a logo from some website and print it on a piece of paper? How many copies can be made? Just like printed fiat can have fake counterparts circulating around which people unknowingly accept, there can be some unauthorized organizations giving certificates (for e.g. Microsoft certified) for fooling students to make some profit.</p>\n\n<p>On the other side, students/candidates themselves can print a fake certificate on a 300 GSM paper and pose for being accepted to an organization (for e.g. job interview or college interview). As an HR or any verifier out there who is looking to filter candidates have only two options, either rely only on that piece of printed paper for accepting the candidate (who might have faked/forged certificate) or do not trust it by doing a retest of the same (which would consume more time in hiring process).</p>\n\n<p>Though still, a possible workaround for certificate authority (issuer like Microsoft) to make a unique standard of printing which is difficult to print by normal printers and only a special printer can print such certificates (just like notes). This process only makes certificates slightly costlier or difficult to print (by using custom plates). This approach is similar to Security by Obscurity, in which it is assumed that the attacker does not have knowledge of the complexity used for printing. But an intelligent attacker might study the printed certificate and reverse engineer to develop a plate to produce similar print, such that it would be difficult to tell the difference in a genuine and fake certificate.</p>\n\n<h4>CertiApp as a solution to above problems</h4>\n<p>CertiApp aims to solve the authenticity-related problems using Kerckhoff's Principle of Cryptography. Here, instead of having complicated and secret printing process, we use a publicly known Elliptic Curve Digital Signature Algorithm (ECDSA). Here every certifier needs to hold a secret key which they will use to generate signature for every certificate they would sign.</p>\n\n<h4>How much secure is it?</h4>\n<p>Anyone else trying to fake someone's signature for a particular certificate would find it very difficult because odds of this happening is 1 in 1000000...(154 zeros) tries. An usual laptop is estimated to take around 10143 years to forge a fake signature for a particular certificate. If we assume combination of every computer in the world to fake a signature, it would take around 10130 years. For instance, age of Earth is approximately 1010. Hence it is not feasible to forge a certificate signature.</p>\n\n<p>While with traditional certificates, reverse engineering a complex printing setup to create fake but almost real looking certificates is quick like at most a week or a month for an printing expert. It's pretty easy to conclude our traditional way is broken and CertiApp solves these problems.</p>\n\n<p>You can check the technical details in the <a className=\"link\" href=\"https://github.com/KMPARDS/certificate-contract\" rel=\"noopenner noreferrer\" target=\"_blank\">GitHub Repository</a></p>\n\n</div>\n    </>\n  );\n}\n","import React from 'react';\nimport { withRouter } from 'react-router-dom';\n\nconst NavigationElement = props => {\n  const urlFormat = props.path !== undefined ? props.path : props.heading.toLowerCase().split(' ').join('-');\n\n  return (\n    <button className={`navigation-element${props.location.pathname === `/${urlFormat}` ? ' active' : ''}`} style={{cursor: 'pointer'}} onClick={() => props.history.push(`/${urlFormat}`)}>{props.heading}</button>\n  );\n};\n\nexport default withRouter(NavigationElement);\n","import React, { Component } from 'react';\nimport NavigationElement from './NavigationElement';\nimport './Navigation.css';\nimport { managerAddress } from '../../env';\n\nexport default class extends Component {\n  state = {\n    isManager: false,\n    showAllItems: true,\n    displayHideButton: false,\n    managerAddress: null,\n    invalidNetwork: false\n  };\n\n  componentDidMount = () => {\n    const setManager = async() => {\n      if(window.certificateContractInstance) {\n        const managerAddress = await window.certificateContractInstance.functions.manager();\n        this.state.managerAddress = managerAddress;\n        return true;\n      }\n      return false;\n    }\n\n    const intervalId = setInterval(async() => {\n      if(await setManager()) {\n        // console.log('setManager cleared');\n        clearInterval(intervalId);\n      }\n    }, 100);\n\n    const intervalId2 = setInterval(() => {\n      try {\n        const navigationGroup = document.querySelector('.navigation-group');\n        if(navigationGroup) {\n          if(navigationGroup.offsetHeight > 56) {\n            this.setState({ displayHideButton: true });\n          } else {\n            this.setState({ displayHideButton: !this.state.showAllItems });\n          }\n        }\n\n        /// change the navbar color during incorrect network\n\n        const isManager = !!window.web3 && !!window.web3.currentProvider && !!this.state.managerAddress && this.state.managerAddress.toLowerCase() === window.web3.currentProvider.selectedAddress.toLowerCase();\n        if(isManager !== this.state.isManager) {\n          this.setState({ isManager });\n        }\n      } catch (error) {\n        // clearInterval(intervalId2);\n      }\n    }, 100);\n  };\n\n  render = () => (\n    <div className=\"navigation-group\">\n      {this.state.showAllItems ? <>\n        <NavigationElement heading=\"Home\" path=\"\" />\n        <NavigationElement heading=\"Register Certificate\" />\n        <NavigationElement heading=\"View Certificate\" />\n        {this.state.isManager ? <NavigationElement heading=\"Add Certifier\" /> : null}\n        <NavigationElement heading=\"List Authorities\" />\n        <NavigationElement heading=\"Sign Certificate\" />\n      </> : null}\n      {this.state.displayHideButton ? <button\n        className=\"navigation-element\"\n        style={{cursor: 'pointer'}}\n        onClick={() => this.setState({ showAllItems: !this.state.showAllItems })}\n      >\n        {this.state.showAllItems\n          ? <>Hide Menu Items</>\n          : <>Show Menu Items</>}\n      </button> : null}\n    </div>\n  );\n\n}\n","import React, { Component } from 'react';\nimport { AUTHORITY_STATUS_ENUM } from '../../env';\nimport './CertificateBox.css';\n\nconst ethers = require('ethers');\n\nexport default class extends Component {\n  state = {\n    loading: true,\n    signerAddress: null,\n    name: null,\n    website: null,\n    status: null,\n    image: null\n  };\n\n  componentDidMount = async() => {\n    const signerAddress = ethers.utils.recoverAddress(this.props.certificateHash, this.props.signature);\n    this.setState({ signerAddress });\n    // console.log({signer});\n    const certifyingAuthority = await window.certificateContractInstance.certifyingAuthorities(signerAddress);\n    // console.log('certifyingAuthority', certifyingAuthority);\n\n    let caObj;\n    if(certifyingAuthority.data !== '0x') {\n      caObj = window._z.decodeCertifyingAuthority(certifyingAuthority.data);\n    } else {\n      caObj = { name: null, website: null };\n    }\n\n    this.setState({\n      name: caObj.name,\n      website: caObj.website ? window._z.toWebsiteURL(caObj.website) : null,\n      status: certifyingAuthority.status,\n      image: caObj.image || null,\n      loading: false\n    });\n\n    console.log('found', certifyingAuthority.isAuthorised);\n    // if(this.props.validCertificate[0] !== false) {\n    //   console.log('i marked it', certifyingAuthority.isAuthorised);\n    //   this.props.validCertificate[1](certifyingAuthority.isAuthorised);\n    // }\n    if(certifyingAuthority.status === AUTHORITY_STATUS_ENUM.AUTHORISED) {\n      this.props.validCertificate[1]((this.props.validCertificate[0] || 0)+1);\n    }\n  };\n\n  render = () => {\n    let signerAuthorisedClass;\n    if(this.state.loading) {\n      signerAuthorisedClass = 'loading';\n    } else if(\n      this.state.status === AUTHORITY_STATUS_ENUM.AUTHORISED\n        || this.state.status === AUTHORITY_STATUS_ENUM.MIGRATED\n    ) {\n      signerAuthorisedClass = 'valid';\n    } else if(this.state.status === AUTHORITY_STATUS_ENUM.SUSPENDED) {\n      signerAuthorisedClass = 'suspended';\n    } else {\n      signerAuthorisedClass = 'invalid';\n    }\n\n    const signerElement = (\n      <>\n        <p>Signer {this.props.serial}: {this.state.name ? <><span className=\"mono\">{this.state.name}</span>{this.state.website ? <a href={this.state.website} rel=\"noopenner noreferrer\" target=\"_blank\" style={{textDecoration: 'none'}}> <img style={{display:'inline',height: '1rem'}} src={'share.png'} /></a> : null} (<span className=\"mono\">{this.state.signerAddress.slice(0,6)}</span>...<span className=\"mono\">{this.state.signerAddress.slice(38)}</span>)</> : (this.state.signerAddress ? <><span className=\"mono\">{this.state.signerAddress}</span></> : <>Computing address...</>)}</p>\n        <p>Signature: <span className=\"mono\">{this.props.signature.slice(0,10)}</span>...<span className=\"mono\">{this.props.signature.slice(122)}</span></p>\n      </>\n    );\n\n    return (\n      <div className={['signer-box', signerAuthorisedClass].filter(className=>!!className).join(' ')}>\n        {this.state.image ? <div className=\"row\" style={{display:'inline-block', width:'80%'}}>\n          <div className=\"column2\" style={{textAlign: 'right'}}>\n            <img className=\"certificate-signer-img\" src={'https://ipfs.infura.io/ipfs/'+this.state.image} />\n          </div>\n          <div className=\"column1\">\n            <div style={{textAlign: 'left', marginLeft: '1rem'}}>\n              {signerElement}\n            </div>\n          </div>\n        </div> : signerElement}\n      </div>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport { Helmet } from \"react-helmet\";\nimport SignerBox from './SignerBox';\nimport './CertificateBox.css';\nimport { network, certOrder } from '../../env';\n\nconst QRCode = require('qrcode');\nconst ethers = require('ethers');\n\nexport default class extends Component {\n  state = {\n    validCertificate: (this.props.validCertificate&&this.props.validCertificate[0]) || null,\n    isAlreadyRegistered: null\n  };\n\n  componentDidMount = async() => {\n    setInterval(() => {\n      if(this.props.validCertificate && this.state.validCertificate !== this.props.validCertificate[0]) {\n        this.setState({ validCertificate: this.props.validCertificate[0] });\n      }\n    }, 100);\n    if(this.props.qrDisplay) QRCode.toCanvas(document.getElementById('qrcode-canvas'), window.location.href);\n\n    const certificate = await window.certificateContractInstance.certificates(this.props.certificateObj.certificateHash);\n\n    this.setState({ isAlreadyRegistered: certificate.signers !== '0x' });\n  }\n\n  render = () => {\n    const pc = this.props.certificateObj.parsedCertificate;\n    return (\n      <div className=\"certificate-box\" id=\"printable\">\n        <Helmet>\n          <title>{pc.name} is certified on Blockchain</title>\n          <meta\n            name=\"description\"\n            content=\"View certifications on blockchain\"\n          />\n        </Helmet>\n        <div className=\"certificate-container\">\n          {this.props.preview ? <p className=\"preview\">{this.state.isAlreadyRegistered ? <>Seems that this certificate is already registered and available at <a style={{cursor: 'pointer'}} onClick={() => this.props.history.push(`view-certificate/${this.props.certificateObj.certificateHash}`)}>https://kmpards.github.io/certidapp/view-certificate/{this.props.certificateObj.certificateHash}</a>. The smart contract will again accept this certificate only if there are more signers otherwise it will raise an exception.</> : <>{(this.props.certificateObj.signatures ? this.props.certificateObj.signatures.length : 0) ? <>Note: This is only a preview of the certificate, please register the certificate.</> : <>This is a preview of the entered certificate hex data.</>}</>}</p> : null}\n          {pc.category ? <p className=\"category\">Certificate of <span className=\"category mono\">{pc.category}</span></p> : null}\n\n          <p className=\"category-subtext\">{!pc.category ? <>This certificate </> : null}is awarded{pc.name ? <> to</> : null}</p>\n\n          {pc.name ? <p className=\"name mono\">{pc.name}</p> : null}\n\n          {\n            pc.score || pc.subject || pc.date1 || pc.datetime1\n            ? <p>{pc.score || pc.subject || pc.category ? <>For </> : null}{\n              pc.category || pc.score\n              ? <>{\n                pc.score !== null\n                ? <>Acheiving <span className=\"score mono\">{pc.score}%</span></>\n                : <>Extraordinary</>\n              } <span className=\"mono\">{pc.category}</span> {\n                pc.subject\n                ? <>{\n                  pc.name\n                  ? <>in</>\n                  : <>of</>\n                } </>\n                : null\n              }<span className=\"subject mono\">{pc.subject}</span></>\n              : null\n            }{\n              (() => {\n                const date1 = pc.datetime1\n                  || pc.date1;\n                const date2 = pc.datetime2\n                  || pc.date2;\n                const DateEl = props => <span className=\"date mono\">{props.children}</span>\n                console.log({date1, date2});\n                if(date1 && date2) {\n                  return <> from <DateEl>{date1}</DateEl> to <DateEl>{date2}</DateEl></>;\n                } else if(date1 && !date2) {\n                  return <> on <DateEl>{date1}</DateEl></>;\n                } else if(!date1 && date2) {\n                  return <> till <DateEl>{date2}</DateEl></>\n                } else {\n                  return null;\n                }\n              })()\n            }{\n              pc.location\n              ? <> at <span className=\"location mono\">{pc.location}</span></>\n              : null\n            }.</p>\n            : null\n          }\n\n          {Object.keys(pc).filter(key => ![...certOrder, 'date1', 'date2', 'location'].includes(key)).map(key => (\n            <p key={'cert-'+key} className={key}>{key}: {pc[key]}</p>\n          ))}\n\n\n          <p>{this.state.validCertificate === (this.props.certificateObj.signatures ? this.props.certificateObj.signatures.length : 0)\n            ? <>The above certificate information is signed by following <span className=\"mono\">{this.state.validCertificate}</span> <span className=\"mono\">signer{this.state.validCertificate > 1 ? <>s</>:null}\n            </span> which is cryptographically verified by the certificate smart contract.</>\n            : (\n              0 < this.state.validCertificate\n              && this.state.validCertificate < (this.props.certificateObj.signatures ? this.props.certificateObj.signatures.length : 0)\n              ? <>Seems that this certificate is signed by only {this.state.validCertificate} valid signers out of {this.props.certificateObj.signatures ? this.props.certificateObj.signatures.length : 0} total signers, you can remove signatures of unauthorised signers.</>\n              : <>There are no authorised signatures on this certificate.</>\n            )}</p>\n\n          {(this.props.certificateObj.signatures ? this.props.certificateObj.signatures.length : 0)\n          ? <>\n            {this.props.certificateObj.signatures.map((signature, i) => (\n              <SignerBox\n                key={'signer-'+i}\n                serial={i+1}\n                certificateHash={this.props.certificateObj.certificateHash}\n                signature={signature}\n                validCertificate={this.props.validCertificate || [this.state.validCertificate, newStatus => this.setState({ validCertificate: newStatus })]}\n                />\n            ))}\n          </>\n          : null}\n\n          {(() => {\n            let content = (\n              <>\n              <p className=\"hash\">Certificate Hash: <span className=\"mono\">{this.props.certificateObj.certificateHash}</span></p>\n              {this.props.certificateObj.txHashArray ? <p>Created at transaction{this.props.certificateObj.txHashArray.length > 1 ? <>s</> : null}\n              {this.props.certificateObj.txHashArray.map(txHash => (\n                <span key={'txHash-'+txHash}><br />\n                  <span className=\"mono\">{txHash.slice(0,6)}</span>...<span className=\"mono\">{txHash.slice(62)}</span>. <a className=\"link-black\" target=\"_blank\" rel=\"noopenner noreferrer\" href={`https://${network === 'homestead' ? '' : network+'.'}etherscan.io/tx/${txHash}`}>View on EtherScan</a></span>\n              ))}\n              </p> : null}\n                </>\n            );\n\n            if(this.props.qrDisplay) {\n              content = (\n                <div className=\"row\">\n                  <div className=\"column1\">\n                    {content}\n                  </div>\n                  <div className=\"column2\">\n                    <div className=\"qrcode-canvas-container\">\n                    <canvas id=\"qrcode-canvas\" />\n                    </div>\n                  </div>\n                </div>\n              );\n            }\n\n            return content;\n          })()}\n        </div>\n      </div>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport { Helmet } from \"react-helmet\";\nimport CertificateBox from '../CertificateBox/CertificateBox';\nimport MetamaskNetworkError from '../MetamaskNetworkError/MetamaskNetworkError';\nimport { TX_STATUS_ENUM, network } from '../../env';\n\nexport default class extends Component {\n  state = {\n    certificateString: '',\n    textAreaClass: null,\n    parsingWait: false,\n    certificateObj: null,\n    validCertificate: null,\n    txStatus: TX_STATUS_ENUM.NOT_INITIATED,\n    errorMessage: '',\n    registrationAllowed: false\n  };\n\n  timeoutId = null;\n\n  onTextAreaChange = event => {\n    const spacesRemoved = event.target.value.split(' ').join('').split('\\n').join('');\n    // console.log(spacesRemoved);\n    try {\n      const certificateObj = window._z.decodeCertificateData(spacesRemoved);\n\n      this.setState({\n        certificateString: spacesRemoved,\n        textAreaClass: 'valid',\n        parsingWait: true,\n        validCertificate: null\n      });\n\n      this.timeoutId = setTimeout(() => {\n        this.setState({\n          parsingWait: false,\n          certificateObj\n        });\n      }, 500);\n    } catch (error) {\n      clearTimeout(this.timeoutId);\n      this.setState({\n        textAreaClass: 'invalid',\n        parsingWait: false,\n        certificateObj: null\n      });\n    }\n  }\n\n  onRegister = async() => {\n    this.setState({ txStatus: TX_STATUS_ENUM.SIGNING, errorMessage: '' });\n    try {\n      const tx = await window.certificateContractInstance.functions.registerCertificate(this.state.certificateString);\n      this.setState({ txStatus: TX_STATUS_ENUM.WAITING_FOR_CONFIRMATION });\n      await tx.wait();\n      this.setState({ txStatus: TX_STATUS_ENUM.CONFIRMED });\n      setTimeout(() => {\n        this.props.history.push(`view-certificate/${this.state.certificateObj.certificateHash}`);\n      },1000);\n    } catch (error) {\n      this.setState({ txStatus: TX_STATUS_ENUM.NOT_INITIATED, errorMessage: error.message });\n    }\n  }\n\n  render = () => (\n    <>\n      <Helmet>\n        <title>Register Certificate</title>\n        <meta\n          name=\"description\"\n          content=\"Register your certificate on Blockchain\"\n        />\n      </Helmet>\n      <p className=\"status-message\">If you have a certificate hex string, you can paste it in the below text box to decode it. You can also use the below Register Certificate button to submit the certificate hex string to the Smart Contract.<br /><br />If you don't have a certificate hex string and you want a certificate, then you can ask any organisation around you that gives traditional printed certificates to switch to blockchain based secure certificates using CertiApp.</p>\n      <p>Paste your signed certificate in the below box:</p>\n      <textarea className={['certificate-textarea', this.state.textAreaClass].filter(className=>!!className).join(' ')} onChange={this.onTextAreaChange} />\n      <br />\n      {this.state.parsingWait\n        ? <p>Please wait parsing your certificate...</p>\n        : null}\n\n      {this.state.certificateObj\n        ? <>\n          <p>Your certificate preview:</p>\n          <CertificateBox\n            certificateObj={this.state.certificateObj}\n            qrDisplay={false}\n            validCertificate={[this.state.validCertificate, newStatus => this.setState({ validCertificate: newStatus })]}\n            preview={true}\n            history={this.props.history}\n            />\n        </>\n        : null}\n\n        {this.state.errorMessage ? <p className=\"error-message\">{this.state.errorMessage}</p> : null}\n\n        <MetamaskNetworkError\n          updateAllowed={boolean => this.setState({ registrationAllowed: boolean })}\n        />\n\n        <button\n          className=\"btn\"\n          disabled={this.state.txStatus !== TX_STATUS_ENUM.NOT_INITIATED || !this.state.registrationAllowed}\n          onClick={this.onRegister}\n        >\n          {(() => {\n            switch(this.state.txStatus) {\n              case TX_STATUS_ENUM.NOT_INITIATED:\n                return 'Register Certificate';\n              case TX_STATUS_ENUM.SIGNING:\n                return 'Signing transaction..';\n              case TX_STATUS_ENUM.WAITING_FOR_CONFIRMATION:\n                return 'Waiting for confirmation...';\n              case TX_STATUS_ENUM.CONFIRMED:\n                return 'Certificate is registered!';\n            }\n          })()}\n        </button>\n    </>\n  );\n}\n","import React, { Component } from 'react';\nimport { Helmet } from \"react-helmet\";\nimport { certificateContract } from '../../env';\n\nconst ethers = require('ethers');\n\nconst HASH_CHECKING_ENUM = {\n  NOT_CHECKING: 0,\n  CHECKING: 1,\n  FOUND_VALID: 2,\n  FOUND_INVALID: 3\n};\n\nexport default class extends Component {\n  state = {\n    userEnteredHash: '',\n    inputError: false,\n    recentCertificateHashes: [],\n    displayText: '',\n    hashCheckStatus: 0\n  };\n\n  componentDidMount = async() => {\n    const logs = await window.provider.getLogs({\n      address: certificateContract.address,\n      fromBlock: 0,\n      toBlock: 'latest',\n      topics: [ethers.utils.id('Certified(bytes32,address)')]\n    });\n\n    console.log(logs);\n\n    this.setState({\n      recentCertificateHashes: logs.map(log => log.topics[1]).filter((item, i, a) => a.indexOf(item) === i).reverse().slice(0,3)\n    });\n\n  };\n\n  onVerifyCertificate = async() => {\n    this.setState({ inputError: false, hashCheckStatus: HASH_CHECKING_ENUM.CHECKING });\n    try {\n      let hash = this.state.userEnteredHash.split(' ').join('').split('\\n').join('');\n\n      try {\n        ethers.utils.hexlify(hash)\n      } catch(error) {\n        try {\n          ethers.utils.hexlify(hash+'0')\n        } catch (error) {\n          throw new Error('Hash should contain only allowed characters');\n        }\n      }\n\n      if(hash.length !== 66) throw new Error('Invalid hash length');\n\n      let certificateStruct;\n\n      try {\n        certificateStruct = await window.certificateContractInstance.functions.certificates(hash);\n      } catch (error) {\n        console.log(error);\n        throw new Error('Network error');\n      }\n\n      // window.certificates[hash] = window._z.decodeCertificateData(certificateObj.data);\n\n      if(certificateStruct.signers === '0x') throw new Error('Certificate not yet registered or it does not exist');\n\n      this.setState({ hashCheckStatus: HASH_CHECKING_ENUM.FOUND_VALID });\n\n      setTimeout(() => {\n        this.props.history.push(`view-certificate/${hash}`);\n      }, 400);\n    } catch(error) {\n      this.setState({\n        inputError: true,\n        displayText: 'Error: '+error.message,\n        hashCheckStatus: HASH_CHECKING_ENUM.NOT_CHECKING\n      });\n    }\n\n  };\n\n  render = () => (\n    <>\n      <Helmet>\n        <title>View Certificate</title>\n        <meta\n          name=\"description\"\n          content=\"View certificates on Blockchain\"\n        />\n      </Helmet>\n      <p className=\"status-message\">This section is used to view an already registered certificate. Using the below box, you can view an already registered certificate with CertiApp Smart Contract on Ethereum Blockchain. You need a certificate hash to proceed. If you don't have a certificate hash, please ask the certificate holder (whose certificate you want to see) to give you hash of their certificate.</p>\n\n      <div style={{margin: '3rem 0'}}>\n        Paste the certificate hash in the box below:<br />\n        <input\n          className={`certificate-textinput${this.state.inputError ? ' invalid' : ''}`}\n          type=\"text\"\n          placeholder=\"Enter Certificate Hash\"\n          onChange={event => {\n            this.setState({\n              userEnteredHash: event.target.value,\n              inputError: false,\n              hashCheckStatus: HASH_CHECKING_ENUM.NOT_CHECKING,\n              displayText: ''\n            });\n          }}\n          />\n        {this.state.displayText ? <p className={this.state.inputError ? 'error-message' : 'status-message'}>{this.state.displayText}</p> : null}\n        <button className=\"btn\" disabled={this.state.hashCheckStatus !== 0} onClick={this.onVerifyCertificate}>{(() => {\n          switch(this.state.hashCheckStatus) {\n            case HASH_CHECKING_ENUM.CHECKING:\n              return 'Checking hash...';\n            case HASH_CHECKING_ENUM.FOUND_VALID:\n              return 'Accessing certificate fields...';\n            default:\n              return 'Verify Certificate';\n          }\n        })()}</button>\n      </div>\n\n      {this.state.recentCertificateHashes.length\n        ? <div className=\"form-group\">\n        <p>Or you can also check out some recent certificate hashes...</p>\n        {this.state.recentCertificateHashes.map((hash,i) => (\n          <p key={`recent-certificates-${hash}`} className=\"mono\">{hash}</p>\n        ))}\n      </div> : null}\n    </>\n  );\n}\n","import React, { Component } from 'react';\nimport { certificateContract } from '../../../env';\nimport CertificateBox from '../../CertificateBox/CertificateBox';\n\nconst ethers = require('ethers');\n\nexport default class extends Component {\n  state = {\n    displayText: 'Please wait...',\n    loading: true,\n    certificateObj: null\n  };\n\n  componentDidMount = async() => {\n    try {\n      let hash = this.props.match.params.hash.split(' ').join('').split('\\n').join('');\n\n      try {\n        ethers.utils.hexlify(hash)\n      } catch(error) {\n        try {\n          ethers.utils.hexlify(hash+'0')\n        } catch (error) {\n          throw new Error('Hash should contain only allowed characters');\n        }\n      }\n\n      if(hash.length !== 66) throw new Error('Invalid hash length');\n\n      try {\n        const certificateObj = await window._z.getCertificateObjFromCertificateHash(this.props.match.params.hash);\n\n        this.setState({ loading: false, displayText: '', certificateObj})\n      } catch (error) {\n        throw new Error('The certificate is not yet registered or it does not exist.');\n      }\n    } catch (error) {\n      this.setState({ displayText: 'Error: '+error.message });\n    }\n  };\n\n  render = () => (\n    <>\n      {this.state.displayText ? <p>{this.state.displayText}</p> : null}\n      {!this.state.loading && this.state.certificateObj ? <CertificateBox\n        certificateObj={this.state.certificateObj}\n        qrDisplay={true}\n      /> : null}\n    </>\n  );\n}\n","import React, { Component } from 'react';\nimport { Helmet } from \"react-helmet\";\nimport { AUTHORITY_STATUS_ENUM } from '../../env';\n\nconst ethers = require('ethers');\n\nexport default class extends Component {\n  state = {\n    address: '',\n    name: '',\n    website: '',\n    image: '',\n    errorMessage: '',\n    statusMessage: ''\n  };\n\n  onConfirmClick = async() => {\n    this.setState({ errorMessage: '', statusMessage: '' })\n    try {\n      const address = ethers.utils.getAddress(this.state.address);\n      const encoded = window._z.encodeCertifyingAuthority({\n        name: this.state.name,\n        website: this.state.website.split(' ').join(''),\n        image: this.state.image\n      });\n\n      const tx = await window.certificateContractInstance.functions.updateCertifyingAuthority(\n        address,\n        encoded,\n        AUTHORITY_STATUS_ENUM.AUTHORISED\n      );\n\n      this.setState({\n        statusMessage: 'Tx sent waiting for confirmation...',\n        errorMessage: ''\n      });\n\n      await tx.wait();\n\n      this.setState({ statusMessage: 'Certifier is Added!', errorMessage: '' })\n    } catch(error) {\n      this.setState({ errorMessage: error.message, statusMessage: '' })\n    }\n  }\n\n  render = () => (\n    <div>\n      <Helmet>\n        <title>Add Certifier</title>\n        <meta\n          name=\"description\"\n          content=\"Add Certification Authority to certify.\"\n        />\n      </Helmet>\n      <p className=\"status-message\">Using this section, the CertiApp Manager can update KYC of certifying authorities.</p>\n      <div className=\"form-group\">\n        <p>Enter Address of new certifier:</p>\n        <input\n          className=\"certificate-textinput\"\n          type=\"text\"\n          placeholder=\"New Certifier Address\"\n          onChange={event => this.setState({address: event.target.value})}/>\n      </div>\n\n      <div className=\"form-group\">\n        <p>Enter Name of new certifier:</p>\n        <input\n          className=\"certificate-textinput\"\n          type=\"text\"\n          placeholder=\"New Certifier Name\"\n          onChange={event => this.setState({name: event.target.value})}/>\n      </div>\n\n      <div className=\"form-group\">\n        <p>Enter Website of new certifier:</p>\n        <input\n          className=\"certificate-textinput\"\n          type=\"text\"\n          placeholder=\"Certifier Website\"\n          onChange={event => this.setState({website: event.target.value})}/>\n      </div>\n\n      <div className=\"form-group\">\n        <p>Enter IPFS Hash of Logo of Certifying Authority (optional):</p>\n        <input\n          className=\"certificate-textinput\"\n          type=\"text\"\n          placeholder=\"IPFS Hash of Logo\"\n          onChange={event => this.setState({image: event.target.value})}/>\n        {this.state.image ? <img style={{maxHeight:'200px', maxWidth:'200px'}} src={`https://ipfs.infura.io/ipfs/${this.state.image}`} /> : null}\n      </div>\n\n      {this.state.errorMessage ? <p className=\"error-message\">Error: {this.state.errorMessage}</p> : null}\n\n      {this.state.statusMessage ? <p className=\"status-message\">Status: {this.state.statusMessage}</p> : null}\n\n      <button className=\"btn\" onClick={this.onConfirmClick}>Confirm New Certifier</button>\n    </div>\n  );\n}\n","import React, { Component } from 'react';\n\nexport default class extends Component {\n  state = {\n    obj: null,\n    isAuthorised: null\n  };\n\n  componentDidMount = async() => {\n    try {\n      const certifyingAuthority = await window.certificateContractInstance.functions.certifyingAuthorities(this.props.address);\n      // console.log(certifyingAuthority);\n      const obj = window._z.decodeCertifyingAuthority(certifyingAuthority.data);\n      this.setState({ obj, isAuthorised: certifyingAuthority.isAuthorised });\n    } catch (error) {\n      console.error(error);\n      this.setState({ name: 'Failed to load name...' });\n    }\n  }\n\n  render = () => {\n    const certifierElement = (\n      <>\n      {this.state.obj ? <>\n        {Object.entries(this.state.obj).map((entry, i) => (\n          <p key={'ca-property-'+i}>{window._z.toTitleCase(entry[0])}: {entry[0] === 'website' ? <a className=\"link\" href={window._z.toWebsiteURL(entry[1])} rel=\"noopenner noreferrer\" target=\"_blank\">{entry[1]}</a> : <>{entry[1]}</>}</p>\n        ))}\n      </> : <>Loading...</>}\n      <p>Signing Address: {this.props.address}</p>\n      <p>Is Authorized: {this.state.isAuthorised === null ? 'Loading...' : (\n        this.state.isAuthorised ? 'Yes' : 'No'\n      )}</p>\n      </>\n    );\n\n    return (\n      <>\n        <div className=\"form-group mono row\">\n          {this.state.obj && this.state.obj.image ? <div>\n            <div className=\"column2\">\n              <img style={{maxHeight:'200px', maxWidth:'200px'}} src={'https://ipfs.infura.io/ipfs/'+this.state.obj.image} />\n            </div>\n            <div className=\"column1\" style={{textAlign: 'left'}}>\n              <div style={{marginLeft: '1rem'}}>\n                {certifierElement}\n              </div>\n            </div>\n          </div> : certifierElement}\n        </div>\n      </>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport { Helmet } from \"react-helmet\";\nimport { certificateContract } from '../../env';\nimport CertifierBox from './CertifierBox';\n\nconst ethers = require('ethers');\n\nexport default class extends Component {\n  state = {\n    certifiers: [],\n    loading: true,\n    errorMessage: ''\n  };\n\n  componentDidMount = async() => {\n    try {\n      const logs = await window.provider.getLogs({\n        address: certificateContract.address,\n        fromBlock: 0,\n        toBlock: 'latest',\n        topics: [ethers.utils.id('AuthorityStatusUpdated(address,uint8)')]\n      });\n      // console.log(logs);\n      this.setState({\n        certifiers: logs.map(log => ethers.utils.hexZeroPad(ethers.utils.hexStripZeros(log.topics[1]), 20)).filter((address, i, self) => self.indexOf(address) === i),\n        loading: false\n      });\n    } catch (error) {\n      this.setState({ errorMessage: error.message });\n    }\n  }\n\n  render = () => (\n    <>\n      <Helmet>\n        <title>List of Certification Authorities</title>\n        <meta\n          name=\"description\"\n          content=\"See all certification authorities\"\n        />\n      </Helmet>\n      <p className=\"status-message\">This page contains list of all verified certifying authority wallets who have completed their KYC.</p>\n\n      {this.state.loading\n        ? <>Please wait loading certifying authorities...</>\n        : <>\n          {this.state.certifiers.length ? <>{this.state.certifiers.map((address,i) => (\n            <CertifierBox key={`certifier-${address}${i}`} address={address} />\n          ))}</> : <>No certifying authorities currently.</>}\n        </>}\n    </>\n  );\n}\n","import React from 'react';\n\nconst CSVReader = ({\n  inputId,\n  style,\n  onFileLoaded,\n  onError\n}) => {\n  let fileContent = undefined;\n\n  const handleChangeFile = e => {\n    try {\n      let reader = new FileReader();\n      const filename = e.target.files[0].name;\n\n      reader.onload = event => {\n        // const csvData = PapaParse.parse(\n        //   ,\n        //   Object.assign(parserOptions, {\n        //     error: onError\n        //   })\n        // );\n        onFileLoaded(event.target.result, filename);\n      };\n\n      reader.readAsText(e.target.files[0]);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  return (\n    <div>\n      <input\n        type=\"file\"\n        id={inputId}\n        style={style}\n        accept=\".csv, text/csv\"\n        onChange={e => handleChangeFile(e)}\n      />\n    </div>\n  );\n};\n\nexport default CSVReader;\n","import React, { Component } from 'react';\n\nconst MONTH = {\n  1: {name: 'Jan', days: 31},\n  2: {name: 'Feb', days: 29},\n  3: {name: 'Mar', days: 31},\n  4: {name: 'Apr', days: 30},\n  5: {name: 'May', days: 31},\n  6: {name: 'Jun', days: 30},\n  7: {name: 'Jul', days: 31},\n  8: {name: 'Aug', days: 31},\n  9: {name: 'Sep', days: 30},\n  10: {name: 'Oct', days: 31},\n  11: {name: 'Nov', days: 30},\n  12: {name: 'Dec', days: 31}\n};\nexport default class extends Component {\n  state = {\n    date: null,\n    month: null,\n    year: null,\n    errorMessage: ''\n  }\n\n  updateState = async obj => {\n    await this.setState({...obj, errorMessage: ''});\n    if(this.props.onChange && this.state.date\n      && this.state.month && this.state.year\n    ) {\n      try {\n        const d = new Date(`${this.state.date} ${MONTH[this.state.month].name} ${this.state.year}`);\n        if(d instanceof Date && isNaN(d)) throw new Error('Invalid Date');\n        // const dateStr = this.state.date+'/'+this.state.month+'/'+this.state.year;\n        this.props.onChange(d);\n      } catch(error) {\n        this.setState({ errorMessage: error.message });\n      }\n    }\n  }\n\n  render = () => (\n    <>\n      <div>\n        Select Date:\n        <select onChange={event => this.updateState({ date: event.target.value })}>\n          <option selected disabled value={null}>Select Date</option>\n          {Array.from(Array(this.state.month ? MONTH[this.state.month].days : 31).keys()).map(key => key+1).map(date => (\n            <option value={date}>{date}</option>\n          ))}\n        </select>\n      </div>\n      <div>\n        Select Month:\n        <select onChange={event => this.updateState({ month: event.target.value })}>\n          <option selected disabled value={null}>Select Month</option>\n          {Array.from(Array(12).keys()).map(key => key+1).map(month => (\n            <option value={month}>{MONTH[month].name}</option>\n          ))}\n        </select>\n      </div>\n      <div>\n        Select Year:\n        <select onChange={event => this.updateState({ year: event.target.value })}>\n          <option selected disabled value={null}>Select Year</option>\n          {Array.from(Array(50).keys()).map(key => key+1951).map(year => (\n            <option value={year}>{year}</option>\n          ))}\n        </select>\n      </div>\n      {this.state.errorMessage ? <p className=\"error-message\">{this.state.errorMessage}</p> : null}\n    </>\n  );\n}\n","import React, { Component } from 'react';\nimport { Helmet } from \"react-helmet\";\nimport { certOrder, extraDataTypes, extraDataKeysExample, dataTypesExample, AUTHORITY_STATUS_ENUM } from '../../env';\nimport CSVReader from './CSVReader';\nimport DatePicker from '../DatePicker/DatePicker';\nimport CertificateBox from '../CertificateBox/CertificateBox';\nimport copy from 'copy-to-clipboard';\n\nconst ethers = require('ethers');\n\nconst CURRENT_PAGE_ENUM = {\n  SELECT_MODE: 0,\n  SIGN_FRESH_CERTIFICATE: 1,\n  SIGN_ENCODED_CERTIFICATE: 2,\n  SIGN_CSV: 3\n};\n\nexport default class extends Component {\n  state = {\n    currentScreen: CURRENT_PAGE_ENUM.SELECT_MODE,\n    name: '',\n    subject: '',\n    score: '',\n    category: '',\n    errorMessage: '',\n    extraData: [],\n    certificateHex: null,\n    copied: false,\n    authorityName: '',\n    isAuthorised: true,\n    csvKeys: null,\n    certificatesToSign: [],\n    errorsInCSV: '',\n    csvSigning: false,\n    certificatesSigned: []\n  };\n\n  intervalId = null;\n  signerAddress = null;\n\n  componentDidMount = () => {\n    this.intervalId = setInterval(async() => {\n      if(window.signer) {\n        const currentAddress = await window.signer.getAddress();\n        if(currentAddress !== this.signerAddress) {\n          try {\n            const certifyingAuthority = await window.certificateContractInstance.functions.certifyingAuthorities(currentAddress);\n\n            if(certifyingAuthority.status === AUTHORITY_STATUS_ENUM.AUTHORISED) {\n              const authorityName = window._z.decodeCertifyingAuthority(certifyingAuthority.data).name;\n\n              this.setState({ authorityName, isAuthorised: true });\n            } else {\n              this.setState({ authorityName: null, isAuthorised: false });\n            }\n\n\n          } catch(error) {\n            console.error(error);\n          }\n          this.signerAddress = currentAddress;\n        }\n      }\n    }, 100);\n  }\n\n  componentWillUnmount = () => {\n    clearInterval(this.intervalId);\n  }\n\n  onNewFieldUpdate = () => {\n    try {\n      const encodedCertificate = window._z.encodeCertificateObject({\n        name: this.state.name,\n        subject: this.state.subject,\n        score: this.state.score || null,\n        category: this.state.category,\n        ...Object.fromEntries(this.state.extraData)\n      });\n\n      const certificateObj = window._z.decodeCertificateData(encodedCertificate);\n\n      this.setState({\n        certificateObj,\n        errorMessage: ''\n      });\n    } catch (error) {\n      this.setState({ errorMessage: error.message })\n    }\n  }\n\n  signNewCertificate = async() => {\n    this.setState({ errorMessage: '' });\n    try {\n      let encodedCertificate = window._z.encodeCertificateObject({\n        name: this.state.name,\n        subject: this.state.subject,\n        score: this.state.score || null,\n        category: this.state.category,\n        ...Object.fromEntries(this.state.extraData)\n      });\n\n      const signature = await window.signer.signMessage(ethers.utils.arrayify(encodedCertificate.dataRLP));\n\n      encodedCertificate = window._z.addSignaturesToCertificateRLP(encodedCertificate, signature);\n\n      this.setState({\n        certificateHex: encodedCertificate.fullRLP\n      });\n\n      // console.log('signed',ethers.utils.hexlify(signedCertificateConcat));\n    } catch (error) {\n      console.error(error.message);\n      this.setState({ errorMessage: error.message })\n    }\n  };\n\n  signEncodedCertificate = async() => {\n    const encoded = window._z.encodeCertificateObject(this.state.certificateObj.parsedCertificate);\n\n    const signature = await window.signer.signMessage(ethers.utils.arrayify(encoded.dataRLP));\n\n    const certificateHex = window._z.addSignaturesToCertificateRLP(this.state.certificateString, signature).fullRLP;\n    this.setState({ certificateHex });\n  }\n\n  onTextAreaChange = event => {\n    const spacesRemoved = event.target.value.split(' ').join('').split('\\n').join('');\n    // console.log(spacesRemoved);\n    try {\n      const certificateObj = window._z.decodeCertificateData(spacesRemoved);\n\n      this.setState({\n        certificateString: spacesRemoved,\n        textAreaClass: 'valid',\n        parsingWait: true,\n        validCertificate: null\n      });\n\n      this.timeoutId = setTimeout(() => {\n        this.setState({\n          parsingWait: false,\n          certificateObj\n        });\n      }, 500);\n    } catch (error) {\n      clearTimeout(this.timeoutId);\n      this.setState({\n        textAreaClass: 'invalid',\n        parsingWait: false,\n        certificateObj: null\n      });\n    }\n  };\n\n  onFileLoaded = output => {\n    let errorsInCSV = '';\n    // csv rows: hex, name, subject, score, category\n    let keys = ['hex', ...certOrder];\n    const certificatesToSign = output.split('\\r').join('').split('\\t').join('').split('\\n').map((row, i) => {\n      const columns = row.split(',');\n      if(i === 0 && columns[0] === 'hex') {\n        keys = columns;\n        return;\n      }\n      try {\n        if(columns.length < 1) throw new Error('Not even 1 entry');\n        if(isNaN(+columns[3])) throw new Error(`Invalid score: ${columns[3]}`);\n        const certObj = {};\n        keys.forEach((key, i) => {\n          if(i !== 0) {\n            certObj[key] = columns[i];\n          }\n        });\n        const encodedCertificate = window._z.encodeCertificateObject(certObj);\n        // encodedCertificate.columns = columns;\n        return {encodedCertificate, columns};\n      } catch (error) {\n        errorsInCSV += `Error at row ${i+1}: ${error.message}\\n`;\n      }\n    }).filter(entry => !!entry);\n    console.log({certificatesToSign}, errorsInCSV);\n    this.setState({ csvKeys: keys, certificatesToSign, errorsInCSV });\n  }\n\n  signCSV = async() => {\n    this.setState({ csvSigning: true });\n\n    if(!window.signer) return alert('Signer not available, please connect metamask');\n\n    const arrayOfCertificatesSignedPromises = this.state.certificatesToSign.map(async obj => {\n      const signature = await window.signer.signMessage(ethers.utils.arrayify(obj.encodedCertificate.dataRLP));\n\n      const columns = [...obj.columns];\n      columns[0] = window._z.addSignaturesToCertificateRLP(columns[0] || obj.encodedCertificate.fullRLP, signature).fullRLP;\n\n      // console.log({signature, });\n\n      console.log(signature);\n      return {\n        ...obj,\n        columns\n      };\n    });\n\n    await Promise.all(arrayOfCertificatesSignedPromises);\n\n    const certificatesSigned = [];\n\n    for(const promise of arrayOfCertificatesSignedPromises) {\n      certificatesSigned.push(await promise);\n    }\n\n    console.log('certificatesSigned',certificatesSigned);\n    this.setState({ certificatesSigned, csvSigning: false });\n  };\n\n  downloadCSV = () => {\n    const keys = this.state.csvKeys || ['hex', ...certOrder];\n    const text = keys.join(',')+'\\n'+this.state.certificatesSigned.map(c => {\n      return [\n        ...c.columns,\n      ].join(',')\n    }).join('\\n');\n\n    const element = document.createElement(\"a\");\n    const file = new Blob([text], {type: 'text/plain'});\n    element.href = URL.createObjectURL(file);\n    element.download = 'signed_certificates.csv' ;\n    document.body.appendChild(element); // Required for this to work in FireFox\n    element.click();\n  }\n\n  render = () => {\n    let screen;\n\n    const header = (\n      <p style={{textAlign: ''}}><button className=\"btn\" onClick={() => this.setState({ currentScreen: CURRENT_PAGE_ENUM.SELECT_MODE })}>Go Back to Select Mode</button></p>\n    );\n\n    if(this.state.currentScreen === CURRENT_PAGE_ENUM.SELECT_MODE) {\n      screen = (\n        <>\n          <button\n            className=\"btn\"\n            onClick={() => this.setState({ currentScreen: CURRENT_PAGE_ENUM.SIGN_FRESH_CERTIFICATE })}\n          >New Certificate</button>\n          <button\n            className=\"btn\"\n            onClick={() => this.setState({ currentScreen: CURRENT_PAGE_ENUM.SIGN_ENCODED_CERTIFICATE })}\n          >Sign Encoded Certificate</button>\n          <button\n            className=\"btn\"\n            onClick={() => this.setState({ currentScreen: CURRENT_PAGE_ENUM.SIGN_CSV })}\n          >CSV Mode</button>\n        </>\n      );\n    } else if(this.state.currentScreen === CURRENT_PAGE_ENUM.SIGN_FRESH_CERTIFICATE) {\n      screen = (\n        <>\n        {this.state.certificateHex\n          ? <>\n          <p>Below is the signed certificate hex string. Send this hex string to certifiee and they can paste it in the 'Register Certificate' box on this App.</p>\n          <p style={{wordBreak:'break-all'}}>{this.state.certificateHex}</p>\n          <p style={{cursor: 'pointer'}} onClick={() => {\n            copy(this.state.certificateHex);\n            !this.state.copied && setTimeout(() => {\n              this.setState({ copied: false });\n            }, 1000);\n            this.setState({ copied: true });\n          }}>{this.state.copied ? '[ Copied! ]' : '[ Copy To Clipboard ]'}</p>\n          </>\n          : <>\n        {header}\n        <div className=\"form-group\">\n          <p>Enter Name:</p>\n          <input\n            className=\"certificate-textinput\"\n            type=\"text\"\n            placeholder=\"Enter Certifiee Name\"\n            onChange={async event => {\n              await this.setState({name: event.target.value});\n              this.onNewFieldUpdate();\n            }}/>\n        </div>\n\n        <div className=\"form-group\">\n          <p>Enter Subject:</p>\n          <input\n            className=\"certificate-textinput\"\n            type=\"text\"\n            placeholder=\"Enter Subject / Course Name\"\n            onChange={async event => {\n              await this.setState({subject: event.target.value});\n              this.onNewFieldUpdate();\n            }}/>\n        </div>\n\n        <div className=\"form-group\">\n          <p>Enter Score:</p>\n          <input\n            className=\"certificate-textinput\"\n            type=\"text\"\n            placeholder=\"E.g. 74.89\"\n            onChange={async event => {\n              await this.setState({score: event.target.value});\n              this.onNewFieldUpdate();\n            }}/>\n        </div>\n\n        <div className=\"form-group\">\n          <p>Certification Type / Category:</p>\n          <input\n            className=\"certificate-textinput\"\n            type=\"text\"\n            placeholder=\"e.g. Participation / Merit / Appreciation\"\n            onChange={async event => {\n              await this.setState({category: event.target.value});\n              this.onNewFieldUpdate();\n            }}/>\n        </div>\n\n        {this.state.extraData.map((entry, i) => (\n          <div className=\"form-group\" key={'extraData-'+i}>\n            <select onChange={async event => {\n              const extraData = [...this.state.extraData];\n              extraData[i][0] = event.target.value;\n              // console.log({extraData});\n              await this.setState({ extraData });\n              this.onNewFieldUpdate();\n            }}>\n              <option selected disabled value={null}>Select Property</option>\n              {Object.keys(extraDataTypes).map((key, j) => (\n                <option key={`extraData-${i}-${j}`} value={key}>{key}</option>\n              ))}\n            </select>\n            <br />\n            {(() => {\n              switch(extraDataTypes[entry[0]]) {\n                case 'date':\n                  return (\n                    <DatePicker\n                      showTimeSelect\n                      onChange={async date => {\n                        const extraData = [...this.state.extraData];\n                        let dateStr = String(date.getDate());\n                        if(dateStr.length < 2) dateStr = '0'+dateStr;\n                        let monthStr = String(date.getMonth()+1);\n                        if(monthStr.length < 2) monthStr = '0'+monthStr;\n                        let yearStr = String(date.getFullYear());\n                        extraData[i][1] = `${dateStr}/${monthStr}/${yearStr}`;\n                        // console.log({extraData});\n                        await this.setState({ extraData });\n                        this.onNewFieldUpdate();\n                      }}\n                      />\n                  );\n                case 'datetime':\n                  return (\n                    <DatePicker\n                      showTimeSelect\n                      onChange={async date => {\n                        const extraData = [...this.state.extraData];\n                        extraData[i][1] = Math.floor(date.getTime() / 1000);\n                        // console.log({extraData});\n                        await this.setState({ extraData });\n                        this.onNewFieldUpdate();\n                      }}\n                    />\n                  );\n                default:\n                  return (\n                    <input\n                      className=\"certificate-textinput\"\n                      type=\"text\"\n                      placeholder={entry[0] === null ? 'Select a property from above' :(extraDataKeysExample[entry[0]] ? `e.g. ${extraDataKeysExample[entry[0]]}` : (dataTypesExample[extraDataTypes[entry[0]]] ? `e.g. ${dataTypesExample[extraDataTypes[entry[0]]]}` : 'Enter value for above property'))}\n                      onChange={async event => {\n                        const extraData = [...this.state.extraData];\n                        extraData[i][1] = event.target.value;\n                        // console.log({extraData});\n                        await this.setState({ extraData });\n                        this.onNewFieldUpdate();\n                      }}/>\n                  );\n              }\n            })()}\n          </div>\n        ))}\n\n        {this.state.errorMessage ? <p className=\"error-message\">{this.state.errorMessage}</p> : null}\n\n        <button className=\"btn\" onClick={() => this.setState({ extraData: [...this.state.extraData, [null,null]] })}>Add More Data</button>\n\n        {this.state.certificateObj ? <CertificateBox\n          certificateObj={this.state.certificateObj}\n          qrDisplay={false}\n          validCertificate={[this.state.validCertificate, newStatus => this.setState({ validCertificate: newStatus })]}\n          /> : null}\n\n        <button className=\"btn\" onClick={this.signNewCertificate}>Sign this Certificate</button>\n        </>}\n        </>\n      );\n    } else if(this.state.currentScreen === CURRENT_PAGE_ENUM.SIGN_ENCODED_CERTIFICATE) {\n      screen = (\n        <>\n        {this.state.certificateHex\n          ? <>\n          <p>Below is the signed certificate hex string. Send this hex string to certifiee and they can paste it in the 'Register Certificate' box on this App.</p>\n          <p style={{wordBreak:'break-all'}}>{this.state.certificateHex}</p>\n          <p style={{cursor: 'pointer'}} onClick={() => {\n            copy(this.state.certificateHex);\n            !this.state.copied && setTimeout(() => {\n              this.setState({ copied: false });\n            }, 1000);\n            this.setState({ copied: true });\n          }}>{this.state.copied ? '[ Copied! ]' : '[ Copy To Clipboard ]'}</p>\n          </>\n          : <>\n        {header}\n        <p>Paste an unsigned or signed certificate in the below box:</p>\n        <textarea className={['certificate-textarea', this.state.textAreaClass].filter(className=>!!className).join(' ')} onChange={this.onTextAreaChange} />\n        {this.state.certificateObj\n          ? <>\n            <p>Your certificate preview:</p>\n            <CertificateBox\n              certificateObj={this.state.certificateObj}\n              qrDisplay={false}\n              validCertificate={[this.state.validCertificate, newStatus => this.setState({ validCertificate: newStatus })]}\n              />\n          </>\n          : null}\n          <button className=\"btn\" onClick={this.signEncodedCertificate}>Sign this Certificate with your private key</button>\n        </>}\n        </>\n      );\n    } else if(this.state.currentScreen === CURRENT_PAGE_ENUM.SIGN_CSV) {\n      screen = (\n        <>\n        {header}\n          {this.state.certificatesToSign.length === 0\n            ? <>\n          <button className=\"btn\" onClick={() => document.getElementById('csv-input').click()}>Select CSV file</button>\n          <CSVReader\n            inputId=\"csv-input\"\n            onFileLoaded={this.onFileLoaded}\n            style={{display: 'none'}}\n            onError={this.handleDarkSideForce}\n          />\n          </> : <>\n            <table>\n              <thead>\n                <tr>\n                  {this.state.csvKeys.map(key => (\n                    <th key={'csvkey-'+key}>{key}</th>\n                  ))}\n                </tr>\n              </thead>\n              <tbody>\n              {this.state.certificatesToSign.map((obj,i) => (\n                <tr key={'sign-'+i}>\n                  {obj.columns.map((field, j) => (\n                    <td key={'sign-field-'+j}>\n                      {field.length > 32\n                        ? (field.slice(0,2) === '0x'\n                          ? <>{field.slice(0,6)}...{field.slice(field.length - 4, field.length)} ({field.length/2} Bytes)</>\n                          : <>{field.slice(0,10)}... ({field.length} chars)</>\n                        )\n                        : <>{field}</>}\n                    </td>\n                  ))}\n                </tr>\n              ))}\n              </tbody>\n            </table>\n\n            <p>Errors: {this.state.errorsInCSV}</p>\n\n            <button className=\"btn\" onClick={this.signCSV}>{this.state.csvSigning ? 'Signing' : 'Sign'} {this.state.certificatesToSign.length} certificates{this.state.csvSigning ? '...' : null}</button>\n          </>}\n\n          {this.state.certificatesSigned.length ? <>\n            <button className=\"btn\" onClick={this.downloadCSV}>Download updated CSV</button>\n          </> : null}\n        </>\n      );\n    }\n\n\n    return (\n      <>\n        <Helmet>\n          <title>Sign Certificate</title>\n          <meta\n            name=\"description\"\n            content=\"Sign Certificate which can be submitted to blockchain\"\n          />\n        </Helmet>\n\n        {this.state.isAuthorised\n          ? <p className=\"status-message\">Welcome {this.state.authorityName}! Using this portal you can sign certificates on your half and send the generated certificate hex strings to your students/clients so they can register those certificates.</p>\n          : <p className=\"error-message\">{window.signer ? <>Looks like {window.userAddress} is not a verified certifying authority. If you do your KYC for this wallet address, you'll become a verified certificate signer and be able to have a display name, website, logo in the certificates you sign.</> : <>Looks like Metamask is not connected. Please connect it to start signing certificates</>}</p>}\n\n        {screen}\n      </>\n    );\n  }\n}\n","import React from 'react';\nimport { Router, Route, Switch } from 'react-router-dom';\nimport { createBrowserHistory } from 'history';\nimport Home from './containers/Home/Home';\nimport Navigation from './containers/Navigation/Navigation';\nimport RegisterCertificate from './containers/RegisterCertificate/RegisterCertificate';\nimport ViewCertificate from './containers/ViewCertificate/ViewCertificate';\nimport Hash from './containers/ViewCertificate/Hash/Hash';\nimport AddCertifier from './containers/AddCertifier/AddCertifier';\nimport ListAuthorities from './containers/ListAuthorities/ListAuthorities';\nimport SignCertificate from './containers/SignCertificate/SignCertificate';\nimport './App.css';\n\nimport { network } from './env';\n\nconst history = createBrowserHistory({\n  basename: process.env.PUBLIC_URL\n});\n\nwindow.ethers = require('ethers');\nwindow.provider = window.ethers.getDefaultProvider(network);\nwindow._z = require('./functions');\nwindow.certificates = {};\n\nrequire('./ethereum');\n// window.certificateContractInstance = require('./ethereum').certificateContractInstance;\n\nconst App = props => (\n  <Router history={history}>\n    <div className=\"App\">\n      <img className=\"background-lines top\" src='cert-background-lines.png' />\n      <img className=\"background-lines bottom\" src='cert-background-lines2.png' />\n      <header className=\"App-header\">\n        <Navigation />\n        <div className=\"container\">\n          <Switch>\n            <Route path=\"/\" exact component={Home} />\n            <Route path=\"/register-certificate\" exact component={RegisterCertificate} />\n            <Route path=\"/view-certificate\" exact component={ViewCertificate} />\n            <Route path=\"/view-certificate/:hash\" exact component={Hash} />\n            <Route path=\"/add-certifier\" exact component={AddCertifier} />\n            <Route path=\"/list-authorities\" exact component={ListAuthorities} />\n            <Route path=\"/sign-certificate\" exact component={SignCertificate} />\n          </Switch>\n        </div>\n      </header>\n    </div>\n  </Router>\n)\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}